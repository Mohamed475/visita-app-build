"use strict";(self.webpackChunktemplete_react_app=self.webpackChunktemplete_react_app||[]).push([[335],{6050:function(e,n,t){var r,i=t(168),o=(t(2791),t(6031)),a=t(8590),s=t(184),l=o.ZP.div(r||(r=(0,i.Z)(["\n  height: 70vh;\n  font-size: 4rem;\n  font-weight: 600;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 1.5rem;\n"])));n.Z=function(e){return(0,s.jsxs)(l,{children:[(0,s.jsx)("p",{children:e.errorMessage||"There is no place!"}),e.buttonText&&e.to&&(0,s.jsx)(a.Z,{to:e.to||"/",children:e.buttonText||"HOME"})]})}},7335:function(e,n,t){t.r(n);var r,i=t(5861),o=t(885),a=t(4942),s=t(1413),l=t(168),c=t(7757),u=t.n(c),d=t(2791),p=t(8931),f=t(6031),h=t(3165),v=t(291),m=t(8590),g=t(95),b=t(1287),y=(t(5112),t(6050)),x=t(3108),T=t(184),w=f.ZP.div(r||(r=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #000;\n  width: 100vw;\n  height: 100vh;\n  font-size: 2rem;\n  padding-top: 7rem;\n\n  h1 {\n    font-size: 4rem;\n    font-weight: 500;\n  }\n\n  .form-container {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: center;\n    gap: 4rem;\n    color: #000;\n    font-size: 2rem;\n    width: 35vw;\n    background-color: #ebebeb;\n    padding: 3rem 5rem;\n    border-radius: 1rem;\n    margin-top: 3rem;\n  }\n\n  .error-msg {\n    color: red;\n  }\n\n  /* Responsive */\n  @media (max-width: 768px) {\n    .form-container {\n      width: 70vw;\n      padding: 5rem 4rem;\n    }\n  }\n"])));n.default=function(){var e=(0,p.UO)(),n=e.placeId,t=e.creatorId,r=(0,d.useContext)(x.V).token,l={title:{value:"",isValid:!0},description:{value:"",isValid:!0},rating:0,isLoading:!1,isLoadingUpdate:!1,isFormSubmitted:!1,error:null},c=(0,d.useReducer)((function(e,n){switch(n.type){case"INPUT_CHANGE":return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},n.input,(0,s.Z)((0,s.Z)({},e[n.input]),{},{value:n.value,isValid:n.isValid})));case"LOADING":return(0,s.Z)((0,s.Z)({},e),{},{isLoading:n.isLoading});case"LOADING_UPDATE":return(0,s.Z)((0,s.Z)({},e),{},{isLoadingUpdate:n.isLoadingUpdate});case"FORM_SUBMITTED":return(0,s.Z)((0,s.Z)({},e),{},{isFormSubmitted:n.isFormSubmitted});case"RESET_FORM":return l;case"ERROR":return(0,s.Z)((0,s.Z)({},e),{},{error:n.error});default:return e}}),l),f=(0,o.Z)(c,2),Z=f[0],O=f[1],j=(0,d.useCallback)((function(e,n,t){O({type:"INPUT_CHANGE",value:n,isValid:t,input:e})}),[O]),E=function(){var e=(0,i.Z)(u().mark((function e(){var i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:"LOADING",isLoading:!0}),e.prev=1,e.next=4,fetch("".concat("https://visita.onrender.com/api/v1","/places/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});case 4:return i=e.sent,e.next=7,i.json();case 7:(o=e.sent).place||O({type:"ERROR",error:"There is no places to update!"}),o.place.creator!==t&&O({type:"ERROR",error:"You are not the creator of this place!"}),o.place.creator===t&&(O({type:"INPUT_CHANGE",value:o.place.title,isValid:!0,input:"title"}),O({type:"INPUT_CHANGE",value:o.place.description,isValid:!0,input:"description"}),O({type:"INPUT_CHANGE",value:o.place.rating,isValid:!0,input:"rating"})),O({type:"LOADING",isLoading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),O({type:"ERROR",error:e.t0.message}),O({type:"LOADING",isLoading:!1});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:"LOADING_UPDATE",isLoadingUpdate:!0}),e.prev=1,e.next=4,fetch("".concat("https://visita.onrender.com/api/v1","/places/").concat(n),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({title:Z.title.value,description:Z.description.value})});case 4:return t=e.sent,e.next=7,t.json();case 7:(i=e.sent).updatedPlace&&!i.error||O({type:"ERROR",error:i.error}),O({type:"LOADING_UPDATE",isLoadingUpdate:!1}),O({type:"FORM_SUBMITTED",isFormSubmitted:!0}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),O({type:"ERROR",error:e.t0.message}),O({type:"LOADING_UPDATE",isLoadingUpdate:!1}),O({type:"FORM_SUBMITTED",isFormSubmitted:!1});case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){E()}),[]),(0,T.jsxs)(w,{children:[!Z.isLoading&&!Z.error&&(0,T.jsx)("h1",{children:"Update Place"}),Z.isFormSubmitted?(0,T.jsx)(g.Z,{show:Z.isFormSubmitted,closeModal:function(){O({type:"FORM_SUBMITTED"})},width:"30vw",height:"20vh",widthResponsive:"80vw",heightResponsive:"20vh",modalBackgroundColor:"#fff",modalTextColor:"#000",modalFontSize:"2.2rem",modalBorderRadius:"10px",modalBorder:"1px solid #fff",modalPadding:"0 0 3rem 0",overlayBackgroundColor:"rgba(0,0,0,0.65)",button:!0,buttonText:"Back",buttonBackgroundColor:"#00b894",buttonBackgroundColorHover:"#00a88e",buttonTextColor:"#fff",buttonTextColorHover:"#fff",buttonTo:"/".concat(t,"/places"),children:Z.error?(0,T.jsx)("p",{children:Z.error}):(0,T.jsx)("p",{children:"Place updated successfully!"})}):null,Z.error&&(0,T.jsx)(y.Z,{errorMessage:"There is no place to update!",buttonText:"ADD NEW PLACE",to:"/places/new"}),Z.isLoading&&(0,T.jsx)(b.Z,{isVisable:!0,color:"#3498db",backgroundColor:"#f3f3f3",size:".5",widthAndHeight:"4",speedInSecond:".6"}),!Z.isLoading&&!Z.error&&(0,T.jsxs)("form",{className:"form-container",children:[(0,T.jsx)(h.Z,{id:"title",element:"input",type:"text",lable:"Title *",errorText:"Please enter a valid name",validators:[(0,v.hg)(),(0,v.IT)(30),(0,v.CP)(2)],onInput:j,value:Z.title.value,valid:Z.title.isValid}),(0,T.jsx)(h.Z,{id:"description",element:"textarea",rows:"10",lable:"Description *",errorText:"Please enter a discription of at least 10 characters",validators:[(0,v.hg)(),(0,v.CP)(5),(0,v.IT)(500)],onInput:j,value:Z.description.value,valid:Z.description.isValid}),Z.isLoading&&(0,T.jsx)(b.Z,{isVisable:!0,color:"#3498db",backgroundColor:"#f3f3f3",size:".5",widthAndHeight:"4",speedInSecond:".6"}),Z.isLoadingUpdate?(0,T.jsx)(b.Z,{isVisable:!0,color:"#3498db",backgroundColor:"#f3f3f3",size:".5",widthAndHeight:"4",speedInSecond:".6"}):(0,T.jsx)(m.Z,{onClick:function(e){e.preventDefault(),A()},disabled:!Z.title.isValid||!Z.description.isValid,children:"UPDATE PLACE"})]})]})}},3165:function(e,n,t){t.d(n,{Z:function(){return p}});var r,i=t(885),o=t(1413),a=t(2791),s=t(291),l=t(168),c=t(6031).ZP.div(r||(r=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  gap: 0.4rem;\n  color: rgba(0, 0, 0, 0.8);\n  width: 100%;\n  /* padding: 0 2rem; */\n\n  label {\n    font-size: 3rem;\n    font-weight: 500;\n    align-self: flex-start;\n  }\n\n  input {\n    width: 100%;\n    height: 2rem;\n    border-radius: 0.5rem;\n    padding: 3rem 1.5rem;\n    font-size: 2rem;\n    border: 2px solid\n      ",";\n  }\n\n  input:focus {\n    outline: none;\n    border-color: #2185d0;\n  }\n\n  textarea {\n    min-width: 100%;\n    height: 20rem;\n    border: 2px solid #fff;\n    border-radius: 0.5rem;\n    padding: 2rem 1.5rem;\n    font-size: 2rem;\n    resize: none;\n    align-self: flex-start;\n    border-color: ",";\n  }\n\n  textarea:focus {\n    outline: none;\n    border-color: #2185d0;\n  }\n\n  .error-text {\n    color: #ff0000;\n    font-size: 1.65rem;\n    align-self: flex-start;\n  }\n"])),(function(e){return!e.isValid&&e.isTouched?"#ff0000":"#fff"}),(function(e){return!e.isValid&&e.isTouched?"#ff0000":"#fff"})),u=t(184),d=function(e,n){switch(n.type){case"RESET":return(0,o.Z)((0,o.Z)({},e),{},{value:n.value,isValid:!0});case"CHANGE":return(0,o.Z)((0,o.Z)({},e),{},{value:n.value,isValid:(0,s.Gu)(n.value,n.validators)});case"TOUCH":return(0,o.Z)((0,o.Z)({},e),{},{isTouched:!0});default:return e}},p=function(e){var n={value:e.value||"",isValid:e.valid||!1,isTouched:!1},t=(0,a.useReducer)(d,n),r=(0,i.Z)(t,2),o=r[0],s=r[1],l=function(n){s({type:"CHANGE",value:n.target.value,validators:e.validators})},p=function(){s({type:"TOUCH"})},f=e.id,h=e.onInput,v=o.value,m=o.isValid;(0,a.useEffect)((function(){h(f,v,m)}),[f,v,m,h]);var g="textarea"===e.element?(0,u.jsx)("textarea",{id:e.id,rows:e.rows||10,onChange:l,onBlur:p,value:e.value}):(0,u.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:l,onBlur:p,value:e.value,disabled:e.disabled});return(0,u.jsxs)(c,{isValid:o.isValid,isTouched:o.isTouched,children:[(0,u.jsx)("label",{htmlFor:e.id,children:e.lable}),g,!o.isValid&&o.isTouched&&(0,u.jsx)("p",{className:"error-text",children:e.errorText})]})}},291:function(e,n,t){t.d(n,{Ox:function(){return d},IT:function(){return u},CP:function(){return c},hg:function(){return l},Gu:function(){return p}});var r=t(8192);var i="REQUIRE",o="MINLENGTH",a="MAXLENGTH",s="EMAIL",l=function(){return{type:i}},c=function(e){return{type:o,val:e}},u=function(e){return{type:a,val:e}},d=function(){return{type:s}},p=function(e,n){var t,l=!0,c=function(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=(0,r.Z)(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==t.return||t.return()}finally{if(l)throw a}}}}(n);try{for(c.s();!(t=c.n()).done;){var u=t.value;u.type===i&&(l=l&&e.trim().length>0),u.type===o&&(l=l&&e.trim().length>=u.val),u.type===a&&(l=l&&e.trim().length<=u.val),"MIN"===u.type&&(l=l&&+e>=u.val),"MAX"===u.type&&(l=l&&+e<=u.val),u.type===s&&(l=l&&/^\S+@\S+\.\S+$/.test(e))}}catch(d){c.e(d)}finally{c.f()}return l}},4942:function(e,n,t){function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,{Z:function(){return r}})},1413:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(4942);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}}}]);
//# sourceMappingURL=335.b78aadf0.chunk.js.map